\ProvidesPackage{macros}

\RequirePackage{xcolor}
\RequirePackage{xcolor-solarized}
\RequirePackage{xparse}
\RequirePackage{amsmath}
\RequirePackage{etoolbox}
\RequirePackage{mathtools}
\RequirePackage{array}
\RequirePackage{xspace}
\RequirePackage{perfectcut}

\RequirePackage{hott}

% misc
\newcommand{\todo}[1]{\textcolor{solarized-red}{TODO: {#1}}}
\newcommand{\note}[1]{\textcolor{solarized-orange}{NOTE: {#1}}}
\newcommand{\amr}[1]{\textcolor{solarized-blue}{AS: {#1}}}
\newcommand{\jk}[1]{\textcolor{solarized-cyan}{JK: {#1}}}
\newcommand{\vc}[1]{\textcolor{solarized-magenta}{VC: {#1}}}
\newcommand{\review}[1]{\textcolor{solarized-red}{#1}}

% text
\let\ps\perfectparens%

\newcommand{\Nat}[0]{\mathbb{N}}
\NewDocumentCommand{\suc}{O{}}{\mathop{\term{S}}{#1}}
\newcommand{\fac}[1]{{#1}\,!}

\newcommand{\highlight}[1]{\textcolor{solarized-orange}{#1}}

% finite types
\NewDocumentCommand{\Fin}{O{}}{\type{Fin}\ifstrempty{#1}{}{_{#1}}}
\NewDocumentCommand{\FinExcept}{mO{}}{\term{Fin_{\mathsmaller{#1}}^{-}}\ifstrempty{#2}{}{({#2})}}
\newcommand{\fzero}{f_0}

\NewDocumentCommand{\Lehmer}{O{}}{\term{Lehmer}\ifstrempty{#1}{}{({#1})}}
\NewDocumentCommand{\isFin}{O{}}{\term{isFin}\ifstrempty{#1}{}{({#1})}}

\newcommand{\encode}[1]{\mathop{\term{encode_{#1}}}}
\newcommand{\encodePerm}{\encode{perm}}
\newcommand{\encodeSn}{\encode{\Sn}}
\newcommand{\decode}[1]{\mathop{\term{decode_{#1}}}}
\newcommand{\decodePerm}{\decode{perm}}
\newcommand{\decodeSn}{\decode{\Sn}}

% permutations
\newcommand{\el}[1]{\mathbf{#1}}

% symmetric group
\NewDocumentCommand{\Sn}{O{n}}{\type{S_{#1}}}
\NewDocumentCommand{\List}{O{}}{\type{List}\ifstrempty{#1}{}{({#1})}}
\newcommand{\nil}{\term{nil}}
\newcommand{\cons}{\mathrel{\term{::}}}
\newcommand{\inl}{\term{inl}}
\newcommand{\inr}{\term{inr}}
\newcommand{\extend}[1]{{#1}^\#}
\newcommand{\Grp}{\type{Grp}}
\NewDocumentCommand{\cox}{s}{\IfBooleanTF{#1}{\mathrel{\approx^{\ast}}}{\mathrel{\approx}}}
\newcommand{\cancel}{\term{cancel}}
\newcommand{\swap}{\term{swap}}
\newcommand{\braid}{\term{braid}}
\newcommand{\reflr}[1]{\term{{#1}-refl}}
\newcommand{\symr}[1]{\term{{#1}-sym}}
\newcommand{\transr}[1]{\term{{#1}-trans}}
\newcommand{\congrf}[2]{\term{{#1}-cong-{#2}}}
\newcommand{\relr}[1]{\term{{#1}-rel}}
\newcommand{\append}{\mathbin{+\kern -0.4em+}}

% Pi
\newcommand{\PiLang}{\mathit{\Pi}}
\newcommand{\PiPlusLang}{\mathit{{\Pi}^{+}}}
\newcommand{\PiHatLang}{\mathit{{\Pi}^{\wedge}}}

% Types
\newcommand{\UPi}{\mathit{U}}
\newcommand{\UPlus}{\mathit{U}^{+}}
\newcommand{\UHat}{\mathit{{U}^{\wedge}}}

% Combinators
\newcommand{\iso}{\mathrel{\leftrightarrow}}
\newcommand{\Iso}{\mathrel{\Leftrightarrow}}
\newcommand{\isoh}{\mathrel{\leftrightarrow^{\wedge}}}
\newcommand{\Isoh}{\mathrel{\Leftrightarrow^{\wedge}}}

% Pi equivalence
\NewDocumentCommand{\quotet}{E{_}{{}}O{}}{
  \ifstrempty{#1}
  {\term{quote}}
  {\term{quote_{#1}}}
  \ifstrempty{#2}{}{({#2})}
}
\NewDocumentCommand{\evalt}{E{_}{{}}O{}}{
  \ifstrempty{#1}
  {\term{eval}}
  {\term{eval_{#1}}}
  \ifstrempty{#2}{}{({#2})}
}
\NewDocumentCommand{\quoteh}{E{_}{{}}O{}}{
  \ifstrempty{#1}
  {\term{quote^\wedge}}
  {\term{quote^\wedge_{#1}}}
  \ifstrempty{#2}{}{({#2})}
}
\NewDocumentCommand{\evalh}{E{_}{{}}O{}}{
  \ifstrempty{#1}
  {\term{eval^\wedge}}
  {\term{eval^\wedge_{#1}}}
  \ifstrempty{#2}{}{({#2})}
}
