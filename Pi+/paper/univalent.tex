\section{Univalent Subuniverses}~\label{sec:univalent}

In this section, we introduce some basic concepts and notation that we use in Homotopy Type Theory. Then, we define
univalent subuniverses and discuss some specific examples.

\subsection{The Type Theory}~\label{subsec:type-theory}

We work in Homotopy Type Theory, in particular, intensional Martin-L\"{o}f Type Theory, with a univalent universe, and
Higher Inductive Types (HITs) for propositional truncations and set quotients. We recall a few basic facts to
familiarise the reader with the notation we use. For more details about basics of HoTT, we refer the reader to the HoTT
book~\cite{univalentfoundationsprogramHomotopyTypeTheory2013}.

\subsubsection{Identity Types}

In HoTT, the intensional identity type is the type of paths between two terms of the same type. Given two terms $x:A$
and $y:A$, we write $x \id_{A} y$, or simply $x \id y$, for the equality type between them. In book HoTT, the identity
type is generated by reflexivity $\refl_{x}$, and the eliminator for the identity type is given by path induction or the
$J$-rule. The identity type equips each type with the structure of an infinity groupoid, or a homotopy type.

Functions between types are functors between groupoids. Given a function $f : A \to B$, the functorial action is given
by

\[
  \term{ap}_{f} : \dfun{x,y:A}{x \id_{A} y \to f(x) \id_{B} f(y)}
\]

Type families are functions from a type to the universe, that is, an indexed family of groupoids. The $\term{transport}$
operation gives the functorial action of paths in the indexing type, which is defined by path induction. If
$P : A \to \UU$ is a type family, then for a path $x \id_{A} y$, we have

\[
  \transport{P} : \dfun{x,y:A}{x \id_{A} y \to P(x) \to P(y)}
\]

From the topological viewpoint, a type family can also be seen as a fibration. For a type family $P : A \to \UU$ and a
point $x : A$, $P(x)$ gives the fiber over $a$. For a path $p : x \id_{A} y$, $\transport{P}{p}$ gives the path lifting
operation. The total space is given by $\dsum{x:A}{P(x)}$ and the first projection $\pi_1 : \dsum{x:A}{P(x)} \to A$ to
the base space is the fibration. The lifting operation lifts paths in the base space to paths in the total space. If
$p : x \id_{A} y$ is a path in the base space, and $u : P(x)$, we have

\[
  \term{lift}(u,p) : (x , u) \id_{\dsum{x:A}{P(x)}} (y , \tr{p}{u})
\]

where $\tr{p}{u}$ is shorthand for $\transport{P,p}(u)$.

Further, using the groupoid structure of $A$, we can show that transport lifts paths to equivalences, we define
$\term{transport-equiv}$.

\[
  \term{transport-equiv}(P) : \dfun{x,y:A}{x \id_{A} y \to P(x) \eqv P(y)}
\]

\begin{definition}[Univalent Fibration]
  $P$ is a univalent type family (or simply a univalent fibration) if
  $\term{transport-equiv}$ is an equivalence.
\end{definition}

\subsubsection{Univalence}

The univalence principle characterises paths in the universe. It says that equivalent types are equal, or the following
function is an equivalence.

\[
  \ua : A \id_{\UU} B \to A \eqv B
\]

Alternatively, one can say that the identity type family $\term{id} : \UU \to \UU$ is univalent.

\subsubsection{Higher Inductive Types}

\begin{definition}[Propositional Truncation]
  Given a type $A$, the propositional truncation $\Trunc[-1]{A}$, or simply $\Trunc{A}$, is a higher inductive type
  generated by the following constructors,
  \begin{itemize}
    \item an inclusion function $\trunc{\blank} : A \to \Trunc{A}$,
    \item for each $x, y : \Trunc{A}$, a path $\term{trunc}(x,y) : x \id_{\Trunc{A}} y$,
  \end{itemize}
  such that, given any type $B$ with
  \begin{itemize}
    \item a function $g : A \to B$,
    \item for each $x, y : B$, a path $\term{trunc*}(x,y) : x \id_{B} y$,
  \end{itemize}
  there is a unique function $f : \Trunc{A} \to B$ such that,
  \begin{itemize}
    \item $f(\trunc{a}) \equiv g(a)$
    \item for each $x, y : \Trunc{A}$, $\ap{f}{\term{trunc}(x,y)} \id_{B} \term{trunc*}(f(x),f(y))$.
  \end{itemize}
\end{definition}

\begin{definition}[Set Quotient]
  Given a type $A$ which is an $\hSet$, and a relation $R : A \to A \to \hProp$, the set-quotient $\quot{A}{R}$ is the
  higher inductive type generated by
  \begin{itemize}
    \item an inclusion function $q : A \to \quot{A}{R}$,
    \item for each $x, y : A$ such that $R(x,y)$, a path $q(x) \id_{\quot{A}{R}} q(y)$,
    \item a set truncation, for each $x, y : \quot{A}{R}$ and $r, s : x \id_{\quot{A}{R}} y$, we have $r \id s$,
  \end{itemize}
  with an appropriate induction principle.
\end{definition}

We recall that quotients in HoTT are \emph{effective}, that is, if $R$ is an equivalence relation, we have
$R(x,y) \eqv (q(x) \id_{\quot{A}{R}} q(y))$.

\subsection{Univalent Subuniverses}

\begin{definition}[Universe]
  A universe \`{a} la Tarski is given by the following pieces of data,
  \begin{itemize}
    \item a code $U : \UU$,
    \item a decoding function $\El : U \to \UU$.
  \end{itemize}
  If $\El$ is a univalent fibration, $U$ is a univalent universe.
\end{definition}

\begin{definition}[Subuniverse]
  A subtype is a type family $P : \UU \to \UU$ whose fibers are prop-valued, that is, $\forall x, \isProp{P(x)}$. A
  subuniverse generated by a subtype has $U \defeq \dsum{X:\UU}{P(X)}$ and $\El \defeq \fst$.
\end{definition}

\begin{proposition}[Univalent Subuniverse]
  Subuniverses generated by subtypes are univalent.
\end{proposition}

\begin{proof}

\end{proof}

\begin{example}[$\Aut$]
  \[
    \Aut[T] \defeq T \eqv T
  \]
\end{example}

\begin{example}[$\BAut$]
  \[
    \BAut[T] \defeq \Sub{T}
  \]
\end{example}

\begin{example}
  \[
    P(X) \defeq \SubP{X}{\Bool}
  \]
\end{example}

\begin{example}
  For any $n : \Nat$, we have
  \[
    P(X) \defeq \SubP{X}{\Fin[n]}
  \]
  \[
    \UFin[n] \defeq \Sub{\Fin[n]}
  \]
  is the univalent subuniverse of types with cardinality $n$.
\end{example}

\begin{definition}[$\isFin$]
  \[
    \isFin[X] \defeq \dsum{n:\Nat}{\SubP{X}{\Fin[n]}}
  \]
\end{definition}

\begin{proposition}
  $\isFin$ is a proposition.
\end{proposition}

\begin{example}
  \[
    \UFin \defeq \dsum{X:\UU}{\isFin[X]}
  \]
  is the univalent subuniverse of all finite types.
\end{example}

We characterise the path space of subunivalent universes.

\begin{proposition}
  If $T$ is an $n$-type, $\BAut[T]$ is an $(n+1)$-type.
\end{proposition}

\begin{proposition}
  $\UFin$ is a 1-type, that is, a 1-groupoid, or has h-level 3.
\end{proposition}

\begin{proposition}
  \[
    \Omega\BAut[T] \eqv \Aut[T]
  \]
\end{proposition}

\begin{proposition}
  For every $n:\Nat$,
  \[
    \Omega\UFin[n] \eqv \Aut[\Fin[n]]
  \]
\end{proposition}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
